#!/bin/bash

gpu=$(prime-select query)
con=$(xrandr | grep DP-1-2)
con2=$(xrandr | grep DP-1-1-1)


if [[ $con == *"DP-1-2 connected"* ]] | [[ $con2 == *"DP-1-1-1 connected"* ]]
then
    if [ "$gpu" = "intel" ]
    then
        echo "Using intel GPU."
        xrandr --output eDP-1 --off                                                                     $
        sleep 0.5
        xrandr --output DP-2-2 --auto
        xrandr --output DP-1-2 --auto
        xrandr --output DP-2-2 --right-of DP-2-1
        xrandr --output DP-2-2 --right-of DP-2-1
        xrandr --output DP-1-2 --right-of DP-2-2
    elif [ "$gpu" = "nvidia" ]
    then
        echo "Using NVidia GPU."
        xrandr --output eDP-1-1 --off
        sleep 0.5
        xrandr --output DP-1-1-1 --auto
        xrandr --output DP-1-1-2 --auto
        xrandr --output DP-1-2-2 --auto
        xrandr --output DP-1-1-1 --left-of DP-1-1-2
        xrandr --output DP-1-2-2 --left-of DP-1-1-2
        xrandr --output DP-1-1-2 --right-of DP-1-1-1
    fi
else
    xrandr --output eDP-1 --auto
    xrandr --output eDP-1-1 --auto
fi
    

echo "Script Complete using $gpu GPU."

    


